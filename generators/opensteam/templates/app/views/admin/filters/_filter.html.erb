<div class="dv-filter-menu">
  <div class="dv-filter-menu-content">
    <div class="dv-filter-menu-buttons">
      <div class="dv-small-button">
        <%= link_to_function "ADD FILTER" do |page|
          page.insert_html :bottom,
            :dvFilterTableMainBody,
            :partial => "admin/filters/filter_fields",
            :object => Opensteam::System::FilterEntry.new
          page << "$$('#dvFilterTableMainBody tr').last().appear( { duration: 0.5 } );"
          #page[:xxdvFilterTableMain].show
        end %>
      </div>
      <div class="dv-small-button">
        <%- form_tag( { :action => :delete_all_filter, :model => model } , { :id => "delete_filter" } ) do -%><%- end -%>
        <%= link_to_function "RESET FILTER", "$('delete_filter').submit();" %>
      </div>
      <div class="dv-small-button-green"><a href="#" onclick="$('FOFilter').submit();" onfocus="blur();">SEARCH</a></div>
      <br clear="all" />
    </div>

    <% form_tag( { :controller => "admin/#{model.tableize}", :action => 'filter' }, { :id => "FOFilter" } ) do %>

      <div class="dv-filter-list-paging">
        <form name="FOpagingOptions" action="" onsubmit="return false;">
          <table>
            <tr>
              <td><%= page_entries_info records, :entry_name => model %> <!-- Total <strong>103</strong> records found --></td>
              <td>&nbsp;|&nbsp;</td>
              <td>view&nbsp;</td>
              <td style="width:70px;">
                <%= select_tag :paging_itemsPerPage, options_for_select([20, 30, 40], params[:per_page].to_i || 20), :name => "per_page" %>
              </td>
              <td>&nbsp;per page</td>
              <td>&nbsp;|&nbsp;</td>
              <td>Page&nbsp;</td>
              <td></td>
              <td>
                <%= will_paginate records, :page_links => false, :next_label => image_tag('filter-menu/next.png'), :previous_label => image_tag('filter-menu/previous.png'), :separator => text_field_tag( :pageing_currentPage, "#{params[:page]}", :class => "inputFields", :name => "page" ) %>
              </td>
              <td></td>
              <td>&nbsp;of <%= records.total_pages %> pages</td>
            </tr>
          </table>
        </form>
      </div>
      <br clear="all" />
    </div>

    <div id="dvFilterTableMain" class="dv-filter-table" >
      <table cellspacing="0" cellpadding="0" class="tblFilter">
        <tbody id="dvFilterTableMainBody">
          <%#= render :partial => "admin/filters/filter_fields", :object => Opensteam::System::FilterEntry.new %>
          <%= render :partial => "admin/filters/filter_fields", :collection => @filters, :locals => { :model => model } %>
        </tbody>
      </table>

    </div>
  <% end %>
</div>

<script type="text/javascript" language="JavaScript">
  var converted = new Ext.form.ComboBox({
    typeAhead: true,
    triggerAction: 'all',
    transform:'paging_itemsPerPage',
    forceSelection:true,
    triggerClass:'combo-trigger',
    width: 60 } ) ;

</script>
<%= observe_field :pageing_currentPage, :url => { :action => :index }, :method => 'get', :with => :page %>


